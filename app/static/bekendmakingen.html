<!doctype html><html lang="nl"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Bekendmakingen — Schakelbord</title><style>body{font-family:system-ui,Arial,sans-serif;margin:0;background:#0b1020;color:#e9edf7}header{background:#111735;padding:14px 16px}h1{margin:0;font-size:18px}main{padding:16px}label{font-size:12px;color:#aab7ff;display:block;margin:8px 0 6px}input,textarea,button{font:inherit}input,textarea{width:100%;box-sizing:border-box;background:#0e1530;color:#e9edf7;border:1px solid #223069;border-radius:10px;padding:10px 12px}button{background:#2d47ff;color:#fff;border:none;border-radius:10px;padding:10px 14px;cursor:pointer;font-weight:600;margin-right:8px}button.secondary{background:#0e1530;border:1px solid #223069;color:#c9d6ff}.grid{display:grid;gap:12px;grid-template-columns:1fr 1fr 1fr}.card{background:#121a3a;border:1px solid #1f2a56;border-radius:12px;padding:12px}small{color:#9fb0ff}</style><header><h1>Bekendmakingen — Schakelbord</h1></header><main><div class="grid"><div class="card"><h3>1) Gemeenten</h3><label>Gemeenten (komma-gescheiden, of één per regel)</label><textarea id="muni" rows="8" placeholder="Rotterdam\nAmsterdam\nUtrecht"></textarea><small>Tip: je kunt hier plakken; UI kan later worden uitgebreid met autocomplete.</small></div><div class="card"><h3>2) Steekwoorden</h3><label>Steekwoorden (komma-gescheiden)</label><input id="kw" value="Didam arrest, anterieure overeenkomst, grondverkoop, omgevingsvisie"></div><div class="card"><h3>3) Ontvangers</h3><label>E-mail(s) (komma-gescheiden)</label><textarea id="mails" rows="5" placeholder="me@proton.me, collega@bedrijf.nl"></textarea><div style="margin-top:10px"><button id="save">Opslaan</button><button id="dry" class="secondary">Dry-run</button><span id="out" style="margin-left:8px"></span></div></div></div><p style="margin-top:14px"><small>Configuratie wordt opgeslagen in <code>apps/bekendmakingen/configs/bekendmakingen.json</code>. Wekelijks verzenden via taak <code>weekly_bekendmakingen</code>.</small></p></main><script>const $=s=>document.querySelector(s);const BASE=localStorage.getItem('baseUrl')||location.origin.replace(/\/ui.*/, '');const KEY=localStorage.getItem('x_api_key')||'';async function api(path, body){const r=await fetch(BASE+path,{method:'POST',headers:{'Content-Type':'application/json','X-API-Key':KEY},body:JSON.stringify(body)});if(!r.ok) throw new Error(await r.text());return r.json()}function toast(t){const el=$('#out');el.textContent=t;setTimeout(()=>el.textContent='',2000)}async function saveCfg(){const municipalities=$('#muni').value.split(/\n|,/).map(x=>x.trim()).filter(Boolean);const keywords=$('#kw').value.split(',').map(x=>x.trim()).filter(Boolean);const emails=$('#mails').value.split(',').map(x=>x.trim()).filter(Boolean);const payload={repo: 'stijnvantuijl/llm-cloud-starter', branch: 'main', path: 'apps/bekendmakingen/configs/bekendmakingen.json', message: 'update bekendmakingen config via UI', content: JSON.stringify({municipalities, keywords, routes:[{emails}]}, null, 2)+'\n'};await api('/jobs/create',{task:'commit_file',payload});}$('#save').onclick=async()=>{try{await saveCfg();toast('Config opgeslagen ✅')}catch(e){toast('Fout: '+e.message)}};$('#dry').onclick=async()=>{try{await saveCfg();await api('/jobs/create',{task:'weekly_bekendmakingen',payload:{dry_run:true}});toast('Dry-run gestart ✅')}catch(e){toast('Fout: '+e.message)}}</script></html>